showLoader = ->
  $('body').addClass('loading')
  $('#loader').fadeIn('fast')

hideLoader = ->
  $('body').removeClass('loading')
  $('#loader').fadeOut('fast')

$(document)
  .on 'page:fetch', ->
    showLoader()

  .on 'page:receive page:restore', ->
    hideLoader()

  .on 'submit', "form:not([data-remote=true])", ->
    console.log 'bla'
    showLoader()

  .on 'ajax:beforeSend', "form[data-remote=true]", ->
    showLoader()

  .on 'ajax:complete', "form[data-remote=true]", ->
    hideLoader()

  .ajaxSend ->
    showLoader()

  .ajaxComplete ->
    hideLoader()

# Tooltips Fix
$(document).on 'page:change', ->
  $('.tooltip').remove()