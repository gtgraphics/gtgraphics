.col-sm-8.col-sm-offset-2
  = page_header

  = simple_form_for @user_update_form, as: :user_update, url: @user_update_form.user == current_user ? :admin_account : [:admin, @user_update_form.user], method: :patch, wrapper: :horizontal_form, html: { class: 'form-horizontal' } do |form|

    %fieldset
      %legend= translate('views.forms.basics')
      .fields
        = form.input :first_name
        = form.input :last_name
        = form.input :email
        = form.input :preferred_locale, collection: available_locales_for_select, include_blank: translate('helpers.prompts.custom')

    %fieldset
      %legend= User.human_attribute_name(:photo)
      .fields
        - if @user_update_form.photo.present?
          .form-group
            .col-sm-offset-3.col-sm-9
              = image_tag attached_asset_path(@user_update_form.user, :thumbnail, from: :photo), alt: User.human_attribute_name(:photo), class: 'img-rounded'
          = form.input :remove_photo, as: :boolean, wrapper: :horizontal_boolean
        = form.input :photo, as: :file, input_html: { data: { title: translate('helpers.links.browse') } }

    %fieldset
      %legend.clearfix
        .pull-left= translate('views.forms.social')
        .pull-right
          = button_link_to [:admin, @user, :social_links], as: :link, size: :sm do
            = prepend_icon :pencil, translate('helpers.links.manage'), fixed_width: true
      .fields
        = form.input :twitter_username

    %fieldset
      %legend= translate('views.forms.password')
      .fields
        = form.input :reset_password, as: :boolean, wrapper: :horizontal_boolean, input_html: { data: { toggle: 'passwordFields' } }
        #password_fields
          = form.input :current_password, required: true if @user_update_form.user == current_user
          = form.input :generate_password, as: :radio_buttons, wrapper: :horizontal_radio_and_checkboxes, collection: [[translate('helpers.boolean.yes'), true], [translate('helpers.boolean.no'), false]], input_html: { data: { toggle: 'generatePasswordFields' } }
          #generate_password_fields
            = form.input :password, required: true
            = form.input :password_confirmation, required: true

    = form_actions do
      = form.button :button, type: 'submit', class: 'btn-primary' do
        = prepend_icon :save, translate(:update, scope: 'helpers.submit', model: User.model_name.human)
      = button_link_to translate('helpers.links.cancel'), :admin_users
