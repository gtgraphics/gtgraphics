= form_tag :batch_process_admin_images, method: :patch do

  = toolbar do
    .btn-group.batch-control
      = button_tag prepend_icon(:trash, translate('helpers.links.destroy_selected'), outline: true), name: 'destroy', class: 'btn btn-danger', data: { confirm: translate('helpers.confirmations.destroy_selected', model: Image.model_name.human(count: 2)) }
    .btn-group.batch-control
      = button_tag prepend_icon(:hand, translate('helpers.links.assign_to_gallery'), direction: :right, outline: true), name: 'assign_to_gallery', class: 'btn btn-default', data: {  }
    .btn-group
      = create_button_link_for Image, icon: :upload, namespace: :admin, caption: translate('helpers.links.upload', model: Image.model_name.human), url: :new_admin_image
    .btn-group
      = active_button_link_to icon(:th_list, fixed_width: true), update_preferences_admin_account_path(image_view_mode: 'table'), method: :patch, active: current_user.preferences[:image_view_mode] != 'tiles', title: translate('views.list_types.table'), data: { toggle: 'tooltip', placement: 'bottom', container: '#toolbar' }
      = active_button_link_to icon(:th_large, fixed_width: true), update_preferences_admin_account_path(image_view_mode: 'tiles'), method: :patch, active: current_user.preferences[:image_view_mode] == 'tiles', title: translate('views.list_types.tiles'), data: { toggle: 'tooltip', placement: 'bottom', container: '#toolbar' }
    = paginate @images

  - if @images.any?
    /.row
    /  .col-sm-3
    /    .panel-group
    /      = panel prepend_icon(:filter, 'Filter', fixed_width: true) do
    /        Bla
    /      = panel prepend_icon(:tags, 'Tags', fixed_width: true) do
    /        Bla
    /  .col-sm-9
    /    - @images.each_slice(3) do |images|
    /      .row
    /        - images.each do |image|
    /          .col-sm-4
    /            - present image, with: Admin::ImagePresenter do |image|
    /              = link_to image.show_path, class: 'thumbnail' do
    /                = image_tag image.asset.url(:large_thumbnail), alt: image.title
    /              .caption
    /                %h3= image.title

    = render 'table', checkboxes: true
  - else
    .well.text-center
      %h4= translate('views.hints.empty', model: Image.model_name.human(count: 2))