= simple_form_for [:admin, @page], html: { class: 'form-horizontal', multipart: true } do |form|

  = toolbar do
    .btn-group
      = form.button :button, type: 'submit', class: 'btn-primary' do
        = prepend_icon(:save, translate(@page.new_record? ? :create : :update, scope: 'helpers.submit', model: Page.model_name.human))

  .embeddable-manager{data: { url: embeddable_fields_admin_pages_path }}
    .row
      .col-lg-8
        / Editor
        = translation_manager_for @page, url: translation_fields_admin_pages_path(format: :js), data_type: 'script', type: 'PageTranslationManager' do
          .page-fields
            .translations
              = form.simple_fields_for :translations do |translation_fields|
                = render 'translation_fields', fields: translation_fields
            
          .embeddable-fields{data: { translation_url: embeddable_translation_fields_admin_pages_path, type: @page.embeddable_type }}
            = render 'embeddable_fields', fields: form

      .col-lg-4
        / Settings
        #page_settings.panel.panel-default.control-panel
          .panel-heading
            %h3.panel-title= translate('views.forms.settings')

          .panel-body
            - if @page.new_record? or @page.embeddable_class.convertible?
              = form.input :embeddable_type, collection: page_types_for_select, include_blank: false, input_html: { class: 'embeddable-type-select combobox' }, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
            /#page_embeddable_settings
            /  = render 'embeddable_settings', fields: form
            - if @page.new_record? or !@page.root?
              = form.input :slug, input_html: { autocomplete: 'off' }, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
              - if Page.assignable_as_parent_of(@page).exists?
                = form.association :parent, collection: page_sitemap_collection_for_select(Page.assignable_as_parent_of(@page).with_translations(I18n.locale)), input_html: { class: 'combobox' }, include_blank: false, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
            = form.input :published, as: :radio_buttons, include_blank: false, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
            = form.input :menu_item, inline_label: translate('simple_form.inline_labels.page.menu_item'), label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
            = form.input :indexable, inline_label: translate('simple_form.inline_labels.page.indexable'), label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
