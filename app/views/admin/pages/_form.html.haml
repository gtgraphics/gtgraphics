= simple_form_for [:admin, @page], html: { class: 'form-horizontal' } do |form|

  %p= @page.inspect
  - embeddable = @page.embeddable
  %p= embeddable.inspect
  /%p= embeddable.translations.build(locale: I18n.locale).inspect
  %p= embeddable.try(:translations).inspect
  %p= form.object.embeddable_class.inspect

  - c = Content.new(params.require(:page).require(:embeddable_attributes).permit!)
  /%p= c.inspect
  /%p= c.translations.to_a

  .row
    .col-lg-8

      #page_embeddable_container
        = render 'embeddable_fields', fields: form

    .col-lg-4

      .panel.panel-default
        .panel-heading
          %h3.panel-title= translate('views.forms.settings')
        .panel-body
          = form.input :embeddable_type, collection: page_types_for_select, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }

          = form.input :slug, input_html: { autocomplete: 'off' }, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
          - if Page.assignable_as_parent_of(@page).exists?
            = form.association :parent, collection: page_sitemap_collection_for_select(Page.assignable_as_parent_of(@page)), input_html: { rows: 4 }, include_blank: translate('helpers.prompts.none'), label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }
          = form.input :published, label_html: { class: 'col-lg-4' }, container_html: { class: 'col-lg-8' }

          .form-group
            .col-lg-12
              .btn-toolbar
                = form.button :submit, class: 'btn-primary'
                = button_link_to translate('helpers.links.cancel'), :admin_pages

  /.panel.panel-default
  /  .form-group
  /    .col-lg-offset-2.col-lg-10
  /      = form.button :submit, class: 'btn-primary'
  /      = button_link_to translate('helpers.links.cancel'), :admin_pages